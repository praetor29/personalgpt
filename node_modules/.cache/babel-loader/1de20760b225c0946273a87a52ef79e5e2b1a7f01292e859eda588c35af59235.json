{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.evtIsDarkModeEnabled = exports.useIsDarkModeEnabled = void 0;\nvar useGlobalState_1 = require(\"powerhooks/useGlobalState\");\nvar urlSearchParams_1 = require(\"powerhooks/tools/urlSearchParams\");\nvar statefulObservableToStatefulEvt_1 = require(\"powerhooks/tools/StatefulObservable/statefulObservableToStatefulEvt\");\nvar _a = (0, useGlobalState_1.createUseGlobalState)({\n    \"name\": \"isDarkModeEnabled\",\n    \"initialState\": window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches,\n    \"doPersistAcrossReloads\": true\n  }),\n  useIsDarkModeEnabled = _a.useIsDarkModeEnabled,\n  $isDarkModeEnabled = _a.$isDarkModeEnabled;\nexports.useIsDarkModeEnabled = useIsDarkModeEnabled;\nexports.evtIsDarkModeEnabled = (0, statefulObservableToStatefulEvt_1.statefulObservableToStatefulEvt)({\n  \"statefulObservable\": $isDarkModeEnabled\n});\n(function () {\n  var result = (0, urlSearchParams_1.retrieveParamFromUrl)({\n    \"url\": window.location.href,\n    \"name\": \"theme\"\n  });\n  if (!result.wasPresent) {\n    return;\n  }\n  (0, urlSearchParams_1.updateSearchBarUrl)(result.newUrl);\n  var isDarkModeEnabled = function () {\n    switch (result.value) {\n      case \"dark\":\n        return true;\n      case \"light\":\n        return false;\n      default:\n        return undefined;\n    }\n  }();\n  if (isDarkModeEnabled === undefined) {\n    return;\n  }\n  exports.evtIsDarkModeEnabled.state = isDarkModeEnabled;\n})();\nexports.evtIsDarkModeEnabled.attach(function (isDarkModeEnabled) {\n  var id = \"root-color-scheme\";\n  remove_existing_element: {\n    var element_1 = document.getElementById(id);\n    if (element_1 === null) {\n      break remove_existing_element;\n    }\n    element_1.remove();\n  }\n  var element = document.createElement(\"style\");\n  element.id = id;\n  element.innerHTML = \"\\n\\t\\t\\t\\t:root {\\n\\t\\t\\t\\t\\tcolor-scheme: \".concat(isDarkModeEnabled ? \"dark\" : \"light\", \"\\n\\t\\t\\t\\t}\\n\\t\\t\");\n  document.getElementsByTagName(\"head\")[0].appendChild(element);\n});","map":{"version":3,"names":["useGlobalState_1","require","urlSearchParams_1","statefulObservableToStatefulEvt_1","_a","createUseGlobalState","window","matchMedia","matches","useIsDarkModeEnabled","$isDarkModeEnabled","exports","evtIsDarkModeEnabled","statefulObservableToStatefulEvt","result","retrieveParamFromUrl","location","href","wasPresent","updateSearchBarUrl","newUrl","isDarkModeEnabled","value","undefined","state","attach","id","remove_existing_element","element_1","document","getElementById","remove","element","createElement","innerHTML","concat","getElementsByTagName","appendChild"],"sources":["C:\\Users\\prana\\repos\\personalgpt\\.yarn\\__virtual__\\onyxia-ui-virtual-5c2a1ec994\\3\\AppData\\Local\\Yarn\\Berry\\cache\\onyxia-ui-npm-0.47.23-cc0c9aaf2a-10c0.zip\\node_modules\\onyxia-ui\\src\\lib\\useIsDarkModeEnabled.ts"],"sourcesContent":["import { createUseGlobalState } from \"powerhooks/useGlobalState\";\nimport {\n    updateSearchBarUrl,\n    retrieveParamFromUrl,\n} from \"powerhooks/tools/urlSearchParams\";\nimport type { StatefulEvt } from \"evt\";\nimport { statefulObservableToStatefulEvt } from \"powerhooks/tools/StatefulObservable/statefulObservableToStatefulEvt\";\n\nconst { useIsDarkModeEnabled, $isDarkModeEnabled } = createUseGlobalState({\n    \"name\": \"isDarkModeEnabled\",\n    \"initialState\":\n        window.matchMedia &&\n        window.matchMedia(\"(prefers-color-scheme: dark)\").matches,\n    \"doPersistAcrossReloads\": true,\n});\n\nexport { useIsDarkModeEnabled };\n\nexport const evtIsDarkModeEnabled: StatefulEvt<boolean> =\n    statefulObservableToStatefulEvt({\n        \"statefulObservable\": $isDarkModeEnabled,\n    });\n\n(() => {\n    const result = retrieveParamFromUrl({\n        \"url\": window.location.href,\n        \"name\": \"theme\",\n    });\n\n    if (!result.wasPresent) {\n        return;\n    }\n\n    updateSearchBarUrl(result.newUrl);\n\n    const isDarkModeEnabled = (() => {\n        switch (result.value) {\n            case \"dark\":\n                return true;\n            case \"light\":\n                return false;\n            default:\n                return undefined;\n        }\n    })();\n\n    if (isDarkModeEnabled === undefined) {\n        return;\n    }\n\n    evtIsDarkModeEnabled.state = isDarkModeEnabled;\n})();\n\nevtIsDarkModeEnabled.attach(isDarkModeEnabled => {\n    const id = \"root-color-scheme\";\n\n    remove_existing_element: {\n        const element = document.getElementById(id);\n\n        if (element === null) {\n            break remove_existing_element;\n        }\n\n        element.remove();\n    }\n\n    const element = document.createElement(\"style\");\n\n    element.id = id;\n\n    element.innerHTML = `\n\t\t\t\t:root {\n\t\t\t\t\tcolor-scheme: ${isDarkModeEnabled ? \"dark\" : \"light\"}\n\t\t\t\t}\n\t\t`;\n\n    document.getElementsByTagName(\"head\")[0].appendChild(element);\n});\n"],"mappings":";;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AAKA,IAAAE,iCAAA,GAAAF,OAAA;AAEM,IAAAG,EAAA,GAA+C,IAAAJ,gBAAA,CAAAK,oBAAoB,EAAC;IACtE,MAAM,EAAE,mBAAmB;IAC3B,cAAc,EACVC,MAAM,CAACC,UAAU,IACjBD,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAACC,OAAO;IAC7D,wBAAwB,EAAE;GAC7B,CAAC;EANMC,oBAAoB,GAAAL,EAAA,CAAAK,oBAAA;EAAEC,kBAAkB,GAAAN,EAAA,CAAAM,kBAM9C;AAEOC,OAAA,CAAAF,oBAAA,GAAAA,oBAAA;AAEIE,OAAA,CAAAC,oBAAoB,GAC7B,IAAAT,iCAAA,CAAAU,+BAA+B,EAAC;EAC5B,oBAAoB,EAAEH;CACzB,CAAC;AAEN,CAAC;EACG,IAAMI,MAAM,GAAG,IAAAZ,iBAAA,CAAAa,oBAAoB,EAAC;IAChC,KAAK,EAAET,MAAM,CAACU,QAAQ,CAACC,IAAI;IAC3B,MAAM,EAAE;GACX,CAAC;EAEF,IAAI,CAACH,MAAM,CAACI,UAAU,EAAE;IACpB;;EAGJ,IAAAhB,iBAAA,CAAAiB,kBAAkB,EAACL,MAAM,CAACM,MAAM,CAAC;EAEjC,IAAMC,iBAAiB,GAAI;IACvB,QAAQP,MAAM,CAACQ,KAAK;MAChB,KAAK,MAAM;QACP,OAAO,IAAI;MACf,KAAK,OAAO;QACR,OAAO,KAAK;MAChB;QACI,OAAOC,SAAS;;EAE5B,CAAC,CAAC,CAAE;EAEJ,IAAIF,iBAAiB,KAAKE,SAAS,EAAE;IACjC;;EAGJZ,OAAA,CAAAC,oBAAoB,CAACY,KAAK,GAAGH,iBAAiB;AAClD,CAAC,EAAC,CAAE;AAEJV,OAAA,CAAAC,oBAAoB,CAACa,MAAM,CAAC,UAAAJ,iBAAiB;EACzC,IAAMK,EAAE,GAAG,mBAAmB;EAE9BC,uBAAuB,EAAE;IACrB,IAAMC,SAAO,GAAGC,QAAQ,CAACC,cAAc,CAACJ,EAAE,CAAC;IAE3C,IAAIE,SAAO,KAAK,IAAI,EAAE;MAClB,MAAMD,uBAAuB;;IAGjCC,SAAO,CAACG,MAAM,EAAE;;EAGpB,IAAMC,OAAO,GAAGH,QAAQ,CAACI,aAAa,CAAC,OAAO,CAAC;EAE/CD,OAAO,CAACN,EAAE,GAAGA,EAAE;EAEfM,OAAO,CAACE,SAAS,GAAG,8CAAAC,MAAA,CAEHd,iBAAiB,GAAG,MAAM,GAAG,OAAO,sBAEtD;EAECQ,QAAQ,CAACO,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACL,OAAO,CAAC;AACjE,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}