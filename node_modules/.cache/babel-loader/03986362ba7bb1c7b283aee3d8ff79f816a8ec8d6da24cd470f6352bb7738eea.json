{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useClick = void 0;\nvar react_1 = require(\"react\");\nvar evt_1 = require(\"evt\");\nvar hooks_1 = require(\"evt/hooks\");\nvar id_1 = require(\"tsafe/id\");\nvar useConstCallback_1 = require(\"./useConstCallback\");\nvar memoizee_1 = __importDefault(require(\"memoizee\"));\nvar memoize = memoizee_1.default;\n/**\n * Why not use onDoubleClick?\n * Because it down is fired event when a double click is pending.\n * NOTE: callback does not need to be constant.\n */\nfunction useClick(params) {\n  var doubleClickDelayMs = params.doubleClickDelayMs;\n  var constCallback = (0, useConstCallback_1.useConstCallback)(params.callback);\n  var _a = __read((0, react_1.useState)(function () {\n      var evtMouseUpOrDown = evt_1.Evt.create();\n      return {\n        evtMouseUpOrDown: evtMouseUpOrDown,\n        \"getOnMouseProps\": memoize(function (extraArg) {\n          return {\n            \"onMouseDown\": (0, id_1.id)(function (mouseEvent) {\n              evtMouseUpOrDown.post({\n                \"type\": \"down\",\n                mouseEvent: mouseEvent,\n                extraArg: extraArg\n              });\n            }),\n            \"onMouseUp\": (0, id_1.id)(function (mouseEvent) {\n              evtMouseUpOrDown.post({\n                \"type\": \"up\",\n                mouseEvent: mouseEvent,\n                extraArg: extraArg\n              });\n            })\n          };\n        })\n      };\n    }), 1),\n    _b = _a[0],\n    evtMouseUpOrDown = _b.evtMouseUpOrDown,\n    getOnMouseProps = _b.getOnMouseProps;\n  //NOTE: We wrap in useEvt for update when double click delay is changed\n  (0, hooks_1.useEvt)(function (ctx) {\n    var evtDownOrDouble = evt_1.Evt.create();\n    evtMouseUpOrDown.pipe(ctx, function (_a) {\n      var type = _a.type,\n        mouseEvent = _a.mouseEvent,\n        extraArg = _a.extraArg;\n      return type !== \"down\" ? null : [{\n        \"now\": Date.now(),\n        mouseEvent: mouseEvent,\n        extraArg: extraArg\n      }];\n    }).pipe([function (_a, prev) {\n      var mouseEvent = _a.mouseEvent,\n        now = _a.now,\n        extraArg = _a.extraArg;\n      return [{\n        now: now,\n        \"isPendingDouble\": now - prev.now < doubleClickDelayMs,\n        mouseEvent: mouseEvent,\n        extraArg: extraArg\n      }];\n    }, {\n      \"now\": 0,\n      \"isPendingDouble\": false,\n      \"mouseEvent\": null,\n      \"extraArg\": null\n    }]).attachExtract(function (_a) {\n      var isPendingDouble = _a.isPendingDouble;\n      return isPendingDouble;\n    }, function (_a) {\n      var mouseEvent = _a.mouseEvent,\n        extraArg = _a.extraArg;\n      //NOTE: Prevent text selection on double click: \n      //https://stackoverflow.com/a/55617595/3731798\n      mouseEvent.preventDefault();\n      evtMouseUpOrDown.attachOnce(function (_a) {\n        var type = _a.type;\n        return type === \"up\";\n      }, ctx, function (_a) {\n        var mouseEvent = _a.mouseEvent;\n        return evtDownOrDouble.post({\n          \"type\": \"double\",\n          mouseEvent: mouseEvent,\n          extraArg: extraArg\n        });\n      });\n    }).attach(function (_a) {\n      var mouseEvent = _a.mouseEvent,\n        extraArg = _a.extraArg;\n      return evtDownOrDouble.post({\n        \"type\": \"down\",\n        mouseEvent: mouseEvent,\n        extraArg: extraArg\n      });\n    });\n    evtDownOrDouble.attach(function (_a) {\n      var type = _a.type,\n        mouseEvent = _a.mouseEvent,\n        extraArg = _a.extraArg;\n      return constCallback({\n        type: type,\n        mouseEvent: mouseEvent,\n        extraArg: extraArg\n      });\n    });\n  }, [doubleClickDelayMs, evtMouseUpOrDown, constCallback]);\n  return {\n    getOnMouseProps: getOnMouseProps\n  };\n}\nexports.useClick = useClick;","map":{"version":3,"names":["react_1","require","evt_1","hooks_1","id_1","useConstCallback_1","memoizee_1","__importDefault","memoize","default","useClick","params","doubleClickDelayMs","constCallback","useConstCallback","callback","_a","__read","useState","evtMouseUpOrDown","Evt","create","extraArg","id","mouseEvent","post","_b","getOnMouseProps","useEvt","ctx","evtDownOrDouble","pipe","type","Date","now","prev","attachExtract","isPendingDouble","preventDefault","attachOnce","attach","exports"],"sources":["C:\\Users\\prana\\AppData\\Local\\Yarn\\Berry\\cache\\powerhooks-npm-0.20.32-d63ff31bfd-10c0.zip\\node_modules\\powerhooks\\src\\useClick.ts"],"sourcesContent":["\nimport type React from \"react\";\nimport { useState } from \"react\";\nimport { Evt } from \"evt\";\nimport { useEvt } from \"evt/hooks\";\nimport { id } from \"tsafe/id\";\nimport { useConstCallback } from \"./useConstCallback\";\nimport memoizeWithNonExportableTypings from \"memoizee\";\nconst memoize: <F extends (...args: any[]) => any>(f: F)=> F = memoizeWithNonExportableTypings;\n\nexport type ReactMouseEvent = React.MouseEvent<HTMLElement, MouseEvent>;\n\ntype OnMouseUpOrDown = (mouseEvent: ReactMouseEvent) => void;\n\n\n/**\n * Why not use onDoubleClick? \n * Because it down is fired event when a double click is pending.\n * NOTE: callback does not need to be constant.\n */\nexport function useClick<ExtraArg = void>(\n    params: {\n        doubleClickDelayMs: number;\n        callback(params: {\n            type: \"down\" | \"double\";\n            mouseEvent: ReactMouseEvent;\n            extraArg: ExtraArg;\n        }): void;\n    }\n) {\n\n    const { doubleClickDelayMs } = params;\n\n    const constCallback = useConstCallback(params.callback);\n\n    const [{\n        evtMouseUpOrDown,\n        getOnMouseProps\n    }] = useState(() => {\n\n        const evtMouseUpOrDown = Evt.create<{\n            type: \"up\" | \"down\",\n            mouseEvent: ReactMouseEvent;\n            extraArg: ExtraArg;\n        }>();\n\n        return {\n            evtMouseUpOrDown,\n            \"getOnMouseProps\": memoize((extraArg: ExtraArg) => ({\n                \"onMouseDown\": id<OnMouseUpOrDown>(\n                    mouseEvent => {\n                        evtMouseUpOrDown.post({ \"type\": \"down\", mouseEvent, extraArg });\n                    }\n                ),\n                \"onMouseUp\": id<OnMouseUpOrDown>(\n                    mouseEvent => {\n                        evtMouseUpOrDown.post({ \"type\": \"up\", mouseEvent, extraArg });\n                    }\n                )\n            }))\n        };\n\n    });\n\n    //NOTE: We wrap in useEvt for update when double click delay is changed\n    useEvt(\n        ctx => {\n\n            const evtDownOrDouble = Evt.create<{\n                type: \"down\" | \"double\";\n                mouseEvent: ReactMouseEvent;\n                extraArg: ExtraArg;\n            }>();\n\n            evtMouseUpOrDown\n                .pipe(\n                    ctx,\n                    ({ type, mouseEvent, extraArg }) => type !== \"down\" ?\n                        null : [{ \"now\": Date.now(), mouseEvent, extraArg }]\n                )\n                .pipe([\n                    ({ mouseEvent, now, extraArg }, prev) => [{\n                        now,\n                        \"isPendingDouble\": (now - prev.now) < doubleClickDelayMs,\n                        mouseEvent,\n                        extraArg\n                    }],\n                    {\n                        \"now\": 0,\n                        \"isPendingDouble\": false,\n                        \"mouseEvent\": null as any as ReactMouseEvent,\n                        \"extraArg\": null as any as ExtraArg\n                    }\n\n                ])\n                .attachExtract(\n                    ({ isPendingDouble }) => isPendingDouble,\n                    ({ mouseEvent, extraArg }) => {\n                        //NOTE: Prevent text selection on double click: \n                        //https://stackoverflow.com/a/55617595/3731798\n                        mouseEvent.preventDefault();\n\n                        evtMouseUpOrDown.attachOnce(\n                            ({ type }) => type === \"up\",\n                            ctx,\n                            ({ mouseEvent }) => evtDownOrDouble.post({\n                                \"type\": \"double\",\n                                mouseEvent,\n                                extraArg\n                            })\n                        );\n\n                    }\n                )\n                .attach(({ mouseEvent, extraArg }) =>\n                    evtDownOrDouble.post({\n                        \"type\": \"down\",\n                        mouseEvent,\n                        extraArg\n                    })\n                );\n\n            evtDownOrDouble.attach(\n                ({ type, mouseEvent, extraArg }) =>\n                    constCallback({ type, mouseEvent, extraArg })\n            );\n\n\n        },\n        [doubleClickDelayMs, evtMouseUpOrDown, constCallback]\n    );\n\n    return { getOnMouseProps };\n\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,IAAA,GAAAH,OAAA;AACA,IAAAI,kBAAA,GAAAJ,OAAA;AACA,IAAAK,UAAA,GAAAC,eAAA,CAAAN,OAAA;AACA,IAAMO,OAAO,GAAkDF,UAAA,CAAAG,OAA+B;AAO9F;;;;;AAKA,SAAgBC,QAAQA,CACpBC,MAOC;EAGO,IAAAC,kBAAkB,GAAKD,MAAM,CAAAC,kBAAX;EAE1B,IAAMC,aAAa,GAAG,IAAAR,kBAAA,CAAAS,gBAAgB,EAACH,MAAM,CAACI,QAAQ,CAAC;EAEjD,IAAAC,EAAA,GAAAC,MAAA,CAGD,IAAAjB,OAAA,CAAAkB,QAAQ,EAAC;MAEV,IAAMC,gBAAgB,GAAGjB,KAAA,CAAAkB,GAAG,CAACC,MAAM,EAI/B;MAEJ,OAAO;QACHF,gBAAgB,EAAAA,gBAAA;QAChB,iBAAiB,EAAEX,OAAO,CAAC,UAACc,QAAkB;UAAK,OAAC;YAChD,aAAa,EAAE,IAAAlB,IAAA,CAAAmB,EAAE,EACb,UAAAC,UAAU;cACNL,gBAAgB,CAACM,IAAI,CAAC;gBAAE,MAAM,EAAE,MAAM;gBAAED,UAAU,EAAAA,UAAA;gBAAEF,QAAQ,EAAAA;cAAA,CAAE,CAAC;YACnE,CAAC,CACJ;YACD,WAAW,EAAE,IAAAlB,IAAA,CAAAmB,EAAE,EACX,UAAAC,UAAU;cACNL,gBAAgB,CAACM,IAAI,CAAC;gBAAE,MAAM,EAAE,IAAI;gBAAED,UAAU,EAAAA,UAAA;gBAAEF,QAAQ,EAAAA;cAAA,CAAE,CAAC;YACjE,CAAC;WAER;QAXkD,CAWjD;OACL;IAEL,CAAC,CAAC;IA3BKI,EAAA,GAAAV,EAAA,GAGN;IAFGG,gBAAgB,GAAAO,EAAA,CAAAP,gBAAA;IAChBQ,eAAe,GAAAD,EAAA,CAAAC,eAyBjB;EAEF;EACA,IAAAxB,OAAA,CAAAyB,MAAM,EACF,UAAAC,GAAG;IAEC,IAAMC,eAAe,GAAG5B,KAAA,CAAAkB,GAAG,CAACC,MAAM,EAI9B;IAEJF,gBAAgB,CACXY,IAAI,CACDF,GAAG,EACH,UAACb,EAA8B;UAA5BgB,IAAI,GAAAhB,EAAA,CAAAgB,IAAA;QAAER,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAEF,QAAQ,GAAAN,EAAA,CAAAM,QAAA;MAAO,OAAAU,IAAI,KAAK,MAAM,GAC/C,IAAI,GAAG,CAAC;QAAE,KAAK,EAAEC,IAAI,CAACC,GAAG,EAAE;QAAEV,UAAU,EAAAA,UAAA;QAAEF,QAAQ,EAAAA;MAAA,CAAE,CAAC;IADpB,CACoB,CAC3D,CACAS,IAAI,CAAC,CACF,UAACf,EAA6B,EAAEmB,IAAI;UAAjCX,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAEU,GAAG,GAAAlB,EAAA,CAAAkB,GAAA;QAAEZ,QAAQ,GAAAN,EAAA,CAAAM,QAAA;MAAa,QAAC;QACtCY,GAAG,EAAAA,GAAA;QACH,iBAAiB,EAAGA,GAAG,GAAGC,IAAI,CAACD,GAAG,GAAItB,kBAAkB;QACxDY,UAAU,EAAAA,UAAA;QACVF,QAAQ,EAAAA;OACX,CAAC;IALuC,CAKvC,EACF;MACI,KAAK,EAAE,CAAC;MACR,iBAAiB,EAAE,KAAK;MACxB,YAAY,EAAE,IAA8B;MAC5C,UAAU,EAAE;KACf,CAEJ,CAAC,CACDc,aAAa,CACV,UAACpB,EAAmB;UAAjBqB,eAAe,GAAArB,EAAA,CAAAqB,eAAA;MAAO,OAAAA,eAAe;IAAf,CAAe,EACxC,UAACrB,EAAwB;UAAtBQ,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAEF,QAAQ,GAAAN,EAAA,CAAAM,QAAA;MACnB;MACA;MACAE,UAAU,CAACc,cAAc,EAAE;MAE3BnB,gBAAgB,CAACoB,UAAU,CACvB,UAACvB,EAAQ;YAANgB,IAAI,GAAAhB,EAAA,CAAAgB,IAAA;QAAO,OAAAA,IAAI,KAAK,IAAI;MAAb,CAAa,EAC3BH,GAAG,EACH,UAACb,EAAc;YAAZQ,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAO,OAAAM,eAAe,CAACL,IAAI,CAAC;UACrC,MAAM,EAAE,QAAQ;UAChBD,UAAU,EAAAA,UAAA;UACVF,QAAQ,EAAAA;SACX,CAAC;MAJkB,CAIlB,CACL;IAEL,CAAC,CACJ,CACAkB,MAAM,CAAC,UAACxB,EAAwB;UAAtBQ,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAEF,QAAQ,GAAAN,EAAA,CAAAM,QAAA;MAC3B,OAAAQ,eAAe,CAACL,IAAI,CAAC;QACjB,MAAM,EAAE,MAAM;QACdD,UAAU,EAAAA,UAAA;QACVF,QAAQ,EAAAA;OACX,CAAC;IAJF,CAIE,CACL;IAELQ,eAAe,CAACU,MAAM,CAClB,UAACxB,EAA8B;UAA5BgB,IAAI,GAAAhB,EAAA,CAAAgB,IAAA;QAAER,UAAU,GAAAR,EAAA,CAAAQ,UAAA;QAAEF,QAAQ,GAAAN,EAAA,CAAAM,QAAA;MACzB,OAAAT,aAAa,CAAC;QAAEmB,IAAI,EAAAA,IAAA;QAAER,UAAU,EAAAA,UAAA;QAAEF,QAAQ,EAAAA;MAAA,CAAE,CAAC;IAA7C,CAA6C,CACpD;EAGL,CAAC,EACD,CAACV,kBAAkB,EAAEO,gBAAgB,EAAEN,aAAa,CAAC,CACxD;EAED,OAAO;IAAEc,eAAe,EAAAA;EAAA,CAAE;AAE9B;AAlHAc,OAAA,CAAA/B,QAAA,GAAAA,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}