{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUseScopedState = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar capitalize_1 = require(\"./tools/capitalize\");\nvar useNamedState_1 = require(\"./useNamedState\");\nvar overwriteReadonlyProp_1 = require(\"tsafe/lab/overwriteReadonlyProp\");\nfunction createUseScopedState(name, initialState) {\n  var _a;\n  var context = (0, react_1.createContext)(undefined);\n  var useXyz = function () {\n    var out = (0, react_1.useContext)(context);\n    if (out === undefined) {\n      throw new Error(\"Must be used in a component wrapped in <\".concat((0, capitalize_1.capitalize)(name), \"Provider />\"));\n    }\n    return out;\n  };\n  (0, overwriteReadonlyProp_1.overwriteReadonlyProp)(useXyz, \"name\", \"use\".concat((0, capitalize_1.capitalize)(name)));\n  var XyzProvider = function (props) {\n    var children = props.children,\n      initialStateFromProps = props.initialState;\n    var useNamedStateReturnedWrapper = (0, useNamedState_1.useNamedState)(name, initialStateFromProps !== undefined ? initialStateFromProps : initialState);\n    var value = (0, react_1.useMemo)(function () {\n      return useNamedStateReturnedWrapper;\n    }, [useNamedStateReturnedWrapper[name]]);\n    return (0, jsx_runtime_1.jsx)(context.Provider, __assign({\n      value: value\n    }, {\n      children: children\n    }));\n  };\n  (0, overwriteReadonlyProp_1.overwriteReadonlyProp)(XyzProvider, \"name\", \"\".concat((0, capitalize_1.capitalize)(name), \"Provider\"));\n  return _a = {}, _a[useXyz.name] = useXyz, _a[XyzProvider.name] = XyzProvider, _a;\n}\nexports.createUseScopedState = createUseScopedState;","map":{"version":3,"names":["react_1","require","capitalize_1","useNamedState_1","overwriteReadonlyProp_1","createUseScopedState","name","initialState","context","createContext","undefined","useXyz","out","useContext","Error","concat","capitalize","overwriteReadonlyProp","XyzProvider","props","children","initialStateFromProps","useNamedStateReturnedWrapper","useNamedState","value","useMemo","jsx_runtime_1","jsx","Provider","__assign","_a","exports"],"sources":["C:\\Users\\prana\\AppData\\Local\\Yarn\\Berry\\cache\\powerhooks-npm-0.20.32-d63ff31bfd-10c0.zip\\node_modules\\powerhooks\\src\\useScopedState.tsx"],"sourcesContent":["\n\nimport type { ReactNode } from \"react\";\nimport { useContext, createContext, useMemo } from \"react\";\nimport type { UseNamedStateReturnType } from \"./useNamedState\";\nimport { capitalize } from \"./tools/capitalize\";\nimport { useNamedState } from \"./useNamedState\";\nimport { overwriteReadonlyProp } from \"tsafe/lab/overwriteReadonlyProp\";\n\n/** https://docs.powerhooks.dev/api-reference/usescopedstate */\nexport function createUseScopedState<T, Name extends string>(\n    name: Name,\n    initialState: T | (() => T)\n): Record<\n    `use${Capitalize<Name>}`,\n    () => UseNamedStateReturnType<T, Name>\n> & Record<\n    `${Capitalize<Name>}Provider`,\n    (props: {\n        children: ReactNode;\n        initialState?: T | (() => T);\n    }) => JSX.Element\n>;\nexport function createUseScopedState<T, Name extends string>(\n    name: Name\n): Record<\n    `use${Capitalize<Name>}`,\n    () => UseNamedStateReturnType<T, Name>\n> & Record<\n    `${Capitalize<Name>}Provider`,\n    (props: {\n        children: ReactNode;\n        initialState: T | (() => T);\n    }) => JSX.Element\n>;\nexport function createUseScopedState<T, Name extends string>(\n    name: Name,\n    initialState?: T | (() => T)\n): any {\n\n    const context = createContext<UseNamedStateReturnType<T, Name> | undefined>(undefined);\n\n    const useXyz = function () {\n\n        const out = useContext(context);\n\n        if (out === undefined) {\n            throw new Error(\n                `Must be used in a component wrapped in <${capitalize(name)}Provider />`\n            );\n        }\n\n        return out;\n\n    };\n\n    overwriteReadonlyProp(useXyz as any, \"name\", `use${capitalize(name)}`);\n\n    const XyzProvider = function (\n        props: {\n            children: ReactNode;\n            initialState?: T | (() => T);\n        }\n    ) {\n\n        const { children, initialState: initialStateFromProps  } = props;\n\n        const useNamedStateReturnedWrapper = useNamedState(name,(\n            initialStateFromProps !== undefined ? \n                initialStateFromProps : initialState\n        )!);\n\n        const value = useMemo(\n            () => useNamedStateReturnedWrapper,\n            [useNamedStateReturnedWrapper[name]]\n        );\n\n        return (\n            <context.Provider value={value}>\n                {children}\n            </context.Provider>\n        );\n\n    }\n\n    overwriteReadonlyProp(XyzProvider as any, \"name\", `${capitalize(name)}Provider`);\n\n    return {\n        [useXyz.name]: useXyz,\n        [XyzProvider.name]: XyzProvider\n    };\n\n\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAGA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AACA,IAAAG,uBAAA,GAAAH,OAAA;AA4BA,SAAgBI,oBAAoBA,CAChCC,IAAU,EACVC,YAA4B;;EAG5B,IAAMC,OAAO,GAAG,IAAAR,OAAA,CAAAS,aAAa,EAA+CC,SAAS,CAAC;EAEtF,IAAMC,MAAM,GAAG,SAAAA,CAAA;IAEX,IAAMC,GAAG,GAAG,IAAAZ,OAAA,CAAAa,UAAU,EAACL,OAAO,CAAC;IAE/B,IAAII,GAAG,KAAKF,SAAS,EAAE;MACnB,MAAM,IAAII,KAAK,CACX,2CAAAC,MAAA,CAA2C,IAAAb,YAAA,CAAAc,UAAU,EAACV,IAAI,CAAC,gBAAa,CAC3E;;IAGL,OAAOM,GAAG;EAEd,CAAC;EAED,IAAAR,uBAAA,CAAAa,qBAAqB,EAACN,MAAa,EAAE,MAAM,EAAE,MAAAI,MAAA,CAAM,IAAAb,YAAA,CAAAc,UAAU,EAACV,IAAI,CAAC,CAAE,CAAC;EAEtE,IAAMY,WAAW,GAAG,SAAAA,CAChBC,KAGC;IAGO,IAAAC,QAAQ,GAA2CD,KAAK,CAAAC,QAAhD;MAAgBC,qBAAqB,GAAMF,KAAK,CAAAZ,YAAX;IAErD,IAAMe,4BAA4B,GAAG,IAAAnB,eAAA,CAAAoB,aAAa,EAACjB,IAAI,EACnDe,qBAAqB,KAAKX,SAAS,GAC/BW,qBAAqB,GAAGd,YAC9B,CAAC;IAEH,IAAMiB,KAAK,GAAG,IAAAxB,OAAA,CAAAyB,OAAO,EACjB;MAAM,OAAAH,4BAA4B;IAA5B,CAA4B,EAClC,CAACA,4BAA4B,CAAChB,IAAI,CAAC,CAAC,CACvC;IAED,OACI,IAAAoB,aAAA,CAAAC,GAAA,EAACnB,OAAO,CAACoB,QAAQ,EAAAC,QAAA;MAACL,KAAK,EAAEA;IAAK;MAAAJ,QAAA,EACzBA;IAAQ,GACM;EAG3B,CAAC;EAED,IAAAhB,uBAAA,CAAAa,qBAAqB,EAACC,WAAkB,EAAE,MAAM,EAAE,GAAAH,MAAA,CAAG,IAAAb,YAAA,CAAAc,UAAU,EAACV,IAAI,CAAC,aAAU,CAAC;EAEhF,OAAAwB,EAAA,OACIA,EAAA,CAACnB,MAAM,CAACL,IAAI,IAAGK,MAAM,EACrBmB,EAAA,CAACZ,WAAW,CAACZ,IAAI,IAAGY,WAAW,E;AAIvC;AA1DAa,OAAA,CAAA1B,oBAAA,GAAAA,oBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}