{"ast":null,"code":"// Reference counter, useful for garbage collector like functionality\n\n\"use strict\";\n\nvar d = require(\"d\"),\n  extensions = require(\"../lib/registered-extensions\"),\n  create = Object.create,\n  defineProperties = Object.defineProperties;\nextensions.refCounter = function (ignore, conf, options) {\n  var cache, postfix;\n  cache = create(null);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, function (id, length) {\n    cache[id] = length || 1;\n  });\n  conf.on(\"get\" + postfix, function (id) {\n    ++cache[id];\n  });\n  conf.on(\"delete\" + postfix, function (id) {\n    delete cache[id];\n  });\n  conf.on(\"clear\" + postfix, function () {\n    cache = {};\n  });\n  defineProperties(conf.memoized, {\n    deleteRef: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return null;\n      if (!cache[id]) return null;\n      if (! --cache[id]) {\n        conf.delete(id);\n        return true;\n      }\n      return false;\n    }),\n    getRefCount: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return 0;\n      if (!cache[id]) return 0;\n      return cache[id];\n    })\n  });\n};","map":{"version":3,"names":["d","require","extensions","create","Object","defineProperties","refCounter","ignore","conf","options","cache","postfix","async","promise","on","id","length","memoized","deleteRef","get","arguments","delete","getRefCount"],"sources":["C:/Users/prana/AppData/Local/Yarn/Berry/cache/memoizee-npm-0.4.15-69d374fc14-10c0.zip/node_modules/memoizee/ext/ref-counter.js"],"sourcesContent":["// Reference counter, useful for garbage collector like functionality\n\n\"use strict\";\n\nvar d          = require(\"d\")\n  , extensions = require(\"../lib/registered-extensions\")\n\n  , create = Object.create, defineProperties = Object.defineProperties;\n\nextensions.refCounter = function (ignore, conf, options) {\n\tvar cache, postfix;\n\n\tcache = create(null);\n\tpostfix = (options.async && extensions.async) || (options.promise && extensions.promise)\n\t\t? \"async\" : \"\";\n\n\tconf.on(\"set\" + postfix, function (id, length) {\n cache[id] = length || 1;\n});\n\tconf.on(\"get\" + postfix, function (id) {\n ++cache[id];\n});\n\tconf.on(\"delete\" + postfix, function (id) {\n delete cache[id];\n});\n\tconf.on(\"clear\" + postfix, function () {\n cache = {};\n});\n\n\tdefineProperties(conf.memoized, {\n\t\tdeleteRef: d(function () {\n\t\t\tvar id = conf.get(arguments);\n\t\t\tif (id === null) return null;\n\t\t\tif (!cache[id]) return null;\n\t\t\tif (!--cache[id]) {\n\t\t\t\tconf.delete(id);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}),\n\t\tgetRefCount: d(function () {\n\t\t\tvar id = conf.get(arguments);\n\t\t\tif (id === null) return 0;\n\t\t\tif (!cache[id]) return 0;\n\t\t\treturn cache[id];\n\t\t})\n\t});\n};\n"],"mappings":"AAAA;;AAEA,YAAY;;AAEZ,IAAIA,CAAC,GAAYC,OAAO,CAAC,GAAG,CAAC;EACzBC,UAAU,GAAGD,OAAO,CAAC,8BAA8B,CAAC;EAEpDE,MAAM,GAAGC,MAAM,CAACD,MAAM;EAAEE,gBAAgB,GAAGD,MAAM,CAACC,gBAAgB;AAEtEH,UAAU,CAACI,UAAU,GAAG,UAAUC,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAE;EACxD,IAAIC,KAAK,EAAEC,OAAO;EAElBD,KAAK,GAAGP,MAAM,CAAC,IAAI,CAAC;EACpBQ,OAAO,GAAIF,OAAO,CAACG,KAAK,IAAIV,UAAU,CAACU,KAAK,IAAMH,OAAO,CAACI,OAAO,IAAIX,UAAU,CAACW,OAAQ,GACrF,OAAO,GAAG,EAAE;EAEfL,IAAI,CAACM,EAAE,CAAC,KAAK,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAEC,MAAM,EAAE;IAC/CN,KAAK,CAACK,EAAE,CAAC,GAAGC,MAAM,IAAI,CAAC;EACxB,CAAC,CAAC;EACDR,IAAI,CAACM,EAAE,CAAC,KAAK,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAE;IACvC,EAAEL,KAAK,CAACK,EAAE,CAAC;EACZ,CAAC,CAAC;EACDP,IAAI,CAACM,EAAE,CAAC,QAAQ,GAAGH,OAAO,EAAE,UAAUI,EAAE,EAAE;IAC1C,OAAOL,KAAK,CAACK,EAAE,CAAC;EACjB,CAAC,CAAC;EACDP,IAAI,CAACM,EAAE,CAAC,OAAO,GAAGH,OAAO,EAAE,YAAY;IACvCD,KAAK,GAAG,CAAC,CAAC;EACX,CAAC,CAAC;EAEDL,gBAAgB,CAACG,IAAI,CAACS,QAAQ,EAAE;IAC/BC,SAAS,EAAElB,CAAC,CAAC,YAAY;MACxB,IAAIe,EAAE,GAAGP,IAAI,CAACW,GAAG,CAACC,SAAS,CAAC;MAC5B,IAAIL,EAAE,KAAK,IAAI,EAAE,OAAO,IAAI;MAC5B,IAAI,CAACL,KAAK,CAACK,EAAE,CAAC,EAAE,OAAO,IAAI;MAC3B,IAAI,CAAC,GAAEL,KAAK,CAACK,EAAE,CAAC,EAAE;QACjBP,IAAI,CAACa,MAAM,CAACN,EAAE,CAAC;QACf,OAAO,IAAI;MACZ;MACA,OAAO,KAAK;IACb,CAAC,CAAC;IACFO,WAAW,EAAEtB,CAAC,CAAC,YAAY;MAC1B,IAAIe,EAAE,GAAGP,IAAI,CAACW,GAAG,CAACC,SAAS,CAAC;MAC5B,IAAIL,EAAE,KAAK,IAAI,EAAE,OAAO,CAAC;MACzB,IAAI,CAACL,KAAK,CAACK,EAAE,CAAC,EAAE,OAAO,CAAC;MACxB,OAAOL,KAAK,CAACK,EAAE,CAAC;IACjB,CAAC;EACF,CAAC,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}