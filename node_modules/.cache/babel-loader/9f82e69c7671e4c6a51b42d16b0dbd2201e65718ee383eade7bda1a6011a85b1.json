{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useDomRect = void 0;\nvar react_1 = require(\"react\");\nvar useDomRect_1 = require(\"./tools/useDomRect\");\nvar pick_1 = require(\"./tools/pick\");\nvar ViewPortAdapter_1 = require(\"./ViewPortAdapter\");\nvar useStateRef_1 = require(\"./useStateRef\");\nvar id_1 = require(\"tsafe/id\");\nfunction useDomRect(params) {\n  var _a;\n  var internallyCreatedRef = (0, useStateRef_1.useStateRef)(null);\n  var ref = (_a = params === null || params === void 0 ? void 0 : params.ref) !== null && _a !== void 0 ? _a : internallyCreatedRef;\n  var _b = (0, useDomRect_1.useDomRect)({\n      ref: ref\n    }),\n    domRect = _b.domRect,\n    checkIfDomRectUpdated = _b.checkIfDomRectUpdated;\n  var zoomFactor = function useClosure() {\n    var viewPortState = (0, ViewPortAdapter_1.useViewPortState)().viewPortState;\n    var zoomFactor = (viewPortState !== null && viewPortState !== void 0 ? viewPortState : {}).zoomFactor;\n    return {\n      zoomFactor: zoomFactor\n    };\n  }().zoomFactor;\n  (0, react_1.useEffect)(function () {\n    checkIfDomRectUpdated();\n  }, [zoomFactor !== null && zoomFactor !== void 0 ? zoomFactor : Object]);\n  var fixedDomRect = (0, react_1.useMemo)(function () {\n    var writableDomRect = (0, pick_1.pick)(domRect, useDomRect_1.domRectKeys);\n    if (zoomFactor !== undefined) {\n      useDomRect_1.domRectKeys.forEach(function (key) {\n        return writableDomRect[key] /= zoomFactor;\n      });\n    }\n    return (0, id_1.id)(writableDomRect);\n  }, [domRect, zoomFactor !== null && zoomFactor !== void 0 ? zoomFactor : Object]);\n  return {\n    ref: ref,\n    \"domRect\": fixedDomRect\n  };\n}\nexports.useDomRect = useDomRect;","map":{"version":3,"names":["react_1","require","useDomRect_1","pick_1","ViewPortAdapter_1","useStateRef_1","id_1","useDomRect","params","internallyCreatedRef","useStateRef","ref","_a","_b","domRect","checkIfDomRectUpdated","zoomFactor","useClosure","viewPortState","useViewPortState","useEffect","Object","fixedDomRect","useMemo","writableDomRect","pick","domRectKeys","undefined","forEach","key","id","exports"],"sources":["C:\\Users\\prana\\AppData\\Local\\Yarn\\Berry\\cache\\powerhooks-npm-0.20.32-d63ff31bfd-10c0.zip\\node_modules\\powerhooks\\src\\useDomRect.tsx"],"sourcesContent":["\nimport { useMemo, useEffect } from \"react\";\nimport { useDomRect as useRealDomRect, domRectKeys } from \"./tools/useDomRect\";\nimport type { PartialDomRect } from \"./tools/useDomRect\";\nimport { pick } from \"./tools/pick\";\nimport { useViewPortState } from \"./ViewPortAdapter\";\nimport { useStateRef } from \"./useStateRef\";\nimport { id } from \"tsafe/id\";\n\nexport { PartialDomRect };\n\nexport function useDomRect<T extends HTMLElement = any>(): { ref: React.RefObject<T>; domRect: PartialDomRect }\nexport function useDomRect<T extends HTMLElement = any>(params: { ref: React.RefObject<T>; }): { domRect: PartialDomRect; };\nexport function useDomRect<T extends HTMLElement = any>(params?: { ref: React.RefObject<T>; }): { ref: React.RefObject<T>; domRect: PartialDomRect; } {\n\n    const internallyCreatedRef = useStateRef<T>(null);\n\n    const ref = params?.ref ?? internallyCreatedRef;\n\n    const { domRect, checkIfDomRectUpdated } = useRealDomRect<T>({ ref });\n\n    const { zoomFactor } = (function useClosure() {\n\n        const { viewPortState } = useViewPortState();\n\n        const { zoomFactor } = viewPortState ?? {};\n\n        return { zoomFactor };\n\n    })();\n\n    useEffect(\n        () => { checkIfDomRectUpdated(); },\n        [zoomFactor ?? Object]\n    );\n\n    const fixedDomRect = useMemo(\n        () => {\n\n            const writableDomRect = pick(\n                domRect,\n                domRectKeys\n            );\n\n            if (zoomFactor !== undefined) {\n                domRectKeys.forEach(key => writableDomRect[key] /= zoomFactor);\n            }\n\n            return id<PartialDomRect>(writableDomRect);\n\n        },\n        [domRect, zoomFactor ?? Object]\n    );\n\n    return { ref, \"domRect\": fixedDomRect };\n\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AACA,IAAAK,IAAA,GAAAL,OAAA;AAMA,SAAgBM,UAAUA,CAA8BC,MAAqC;;EAEzF,IAAMC,oBAAoB,GAAG,IAAAJ,aAAA,CAAAK,WAAW,EAAI,IAAI,CAAC;EAEjD,IAAMC,GAAG,GAAG,CAAAC,EAAA,GAAAJ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,GAAG,cAAAC,EAAA,cAAAA,EAAA,GAAIH,oBAAoB;EAEzC,IAAAI,EAAA,GAAqC,IAAAX,YAAA,CAAAK,UAAc,EAAI;MAAEI,GAAG,EAAAA;IAAA,CAAE,CAAC;IAA7DG,OAAO,GAAAD,EAAA,CAAAC,OAAA;IAAEC,qBAAqB,GAAAF,EAAA,CAAAE,qBAA+B;EAE7D,IAAAC,UAAU,GAAM,SAASC,UAAUA,CAAA;IAE/B,IAAAC,aAAa,GAAK,IAAAd,iBAAA,CAAAe,gBAAgB,GAAE,CAAAD,aAAvB;IAEb,IAAAF,UAAU,GAAK,CAAAE,aAAa,aAAbA,aAAa,cAAbA,aAAa,GAAI,EAAE,EAAAF,UAAxB;IAElB,OAAO;MAAEA,UAAU,EAAAA;IAAA,CAAE;EAEzB,CAAC,CAAC,CAAE,CAAAA,UARc;EAUlB,IAAAhB,OAAA,CAAAoB,SAAS,EACL;IAAQL,qBAAqB,EAAE;EAAE,CAAC,EAClC,CAACC,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAIK,MAAM,CAAC,CACzB;EAED,IAAMC,YAAY,GAAG,IAAAtB,OAAA,CAAAuB,OAAO,EACxB;IAEI,IAAMC,eAAe,GAAG,IAAArB,MAAA,CAAAsB,IAAI,EACxBX,OAAO,EACPZ,YAAA,CAAAwB,WAAW,CACd;IAED,IAAIV,UAAU,KAAKW,SAAS,EAAE;MAC1BzB,YAAA,CAAAwB,WAAW,CAACE,OAAO,CAAC,UAAAC,GAAG;QAAI,OAAAL,eAAe,CAACK,GAAG,CAAC,IAAIb,UAAU;MAAlC,CAAkC,CAAC;;IAGlE,OAAO,IAAAV,IAAA,CAAAwB,EAAE,EAAiBN,eAAe,CAAC;EAE9C,CAAC,EACD,CAACV,OAAO,EAAEE,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAIK,MAAM,CAAC,CAClC;EAED,OAAO;IAAEV,GAAG,EAAAA,GAAA;IAAE,SAAS,EAAEW;EAAY,CAAE;AAE3C;AA3CAS,OAAA,CAAAxB,UAAA,GAAAA,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}