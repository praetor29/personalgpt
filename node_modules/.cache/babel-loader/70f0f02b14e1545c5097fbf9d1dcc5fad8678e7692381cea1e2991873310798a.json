{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LazyStatefulEvt = void 0;\nvar overwriteReadonlyProp_1 = require(\"tsafe/lab/overwriteReadonlyProp\");\nvar importProxy_1 = require(\"./importProxy\");\nvar LazyStatefulEvt = /** @class */function () {\n  function LazyStatefulEvt(initialState) {\n    this.initialPostCount = 0;\n    this.initialState = initialState;\n  }\n  Object.defineProperty(LazyStatefulEvt.prototype, \"evt\", {\n    get: function () {\n      if (this.__evt === undefined) {\n        this.__evt = new importProxy_1.importProxy.StatefulEvt(this.initialState);\n        //NOTE: For avoid keeping strong reference\n        this.initialState = null;\n        (0, overwriteReadonlyProp_1.overwriteReadonlyProp)(this.__evt, \"postCount\", this.initialPostCount);\n      }\n      return this.__evt;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  LazyStatefulEvt.prototype.__post = function (data, doWait) {\n    if (this.__evt === undefined) {\n      this.initialState = data;\n      return ++this.initialPostCount;\n    }\n    return this.__evt[doWait ? \"postAndWait\" : \"post\"](data);\n  };\n  LazyStatefulEvt.prototype.post = function (data) {\n    return this.__post(data, false);\n  };\n  LazyStatefulEvt.prototype.postAndWait = function (data) {\n    return this.__post(data, true);\n  };\n  return LazyStatefulEvt;\n}();\nexports.LazyStatefulEvt = LazyStatefulEvt;","map":{"version":3,"names":["overwriteReadonlyProp_1","require","importProxy_1","LazyStatefulEvt","initialState","initialPostCount","Object","defineProperty","prototype","get","__evt","undefined","importProxy","StatefulEvt","overwriteReadonlyProp","__post","data","doWait","post","postAndWait","exports"],"sources":["C:\\Users\\prana\\AppData\\Local\\Yarn\\Berry\\cache\\evt-npm-2.5.3-c2ac0365d2-10c0.zip\\node_modules\\evt\\src\\lib\\LazyStatefulEvt.ts"],"sourcesContent":["import { overwriteReadonlyProp } from \"tsafe/lab/overwriteReadonlyProp\";\nimport { importProxy } from \"./importProxy\";\nimport type { StatefulEvt } from \"./types\"\nexport class LazyStatefulEvt<T> {\n\n    private initialPostCount = 0;\n    private initialState: T;\n\n    get evt(): StatefulEvt<T> {\n\n        if (this.__evt === undefined) {\n            this.__evt = new importProxy.StatefulEvt(this.initialState);\n            //NOTE: For avoid keeping strong reference\n            this.initialState = null as any;\n            overwriteReadonlyProp(this.__evt, \"postCount\", this.initialPostCount);\n        }\n\n        return this.__evt;\n\n    }\n    declare private __evt: StatefulEvt<T>;\n\n    constructor(initialState: T) {\n        this.initialState = initialState;\n    }\n\n\n    private __post(data: T, doWait: false): number;\n    private __post(data: T, doWait: true): Promise<void>;\n    private __post(data: T, doWait: boolean): number | Promise<void> {\n\n        if (this.__evt === undefined) {\n\n            this.initialState = data;\n\n            return ++this.initialPostCount;\n\n\n        }\n\n        return this.__evt[doWait ? \"postAndWait\" : \"post\"](data);\n\n    }\n\n    post(data: T) {\n        return this.__post(data, false);\n    }\n\n    postAndWait(data: T) {\n        return this.__post(data, true);\n    }\n\n\n}"],"mappings":";;;;;;AAAA,IAAAA,uBAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAD,OAAA;AAEA,IAAAE,eAAA;EAmBI,SAAAA,gBAAYC,YAAe;IAjBnB,KAAAC,gBAAgB,GAAG,CAAC;IAkBxB,IAAI,CAACD,YAAY,GAAGA,YAAY;EACpC;EAhBAE,MAAA,CAAAC,cAAA,CAAIJ,eAAA,CAAAK,SAAA,OAAG;SAAP,SAAAC,CAAA;MAEI,IAAI,IAAI,CAACC,KAAK,KAAKC,SAAS,EAAE;QAC1B,IAAI,CAACD,KAAK,GAAG,IAAIR,aAAA,CAAAU,WAAW,CAACC,WAAW,CAAC,IAAI,CAACT,YAAY,CAAC;QAC3D;QACA,IAAI,CAACA,YAAY,GAAG,IAAW;QAC/B,IAAAJ,uBAAA,CAAAc,qBAAqB,EAAC,IAAI,CAACJ,KAAK,EAAE,WAAW,EAAE,IAAI,CAACL,gBAAgB,CAAC;;MAGzE,OAAO,IAAI,CAACK,KAAK;IAErB,CAAC;;;;EAUOP,eAAA,CAAAK,SAAA,CAAAO,MAAM,GAAd,UAAeC,IAAO,EAAEC,MAAe;IAEnC,IAAI,IAAI,CAACP,KAAK,KAAKC,SAAS,EAAE;MAE1B,IAAI,CAACP,YAAY,GAAGY,IAAI;MAExB,OAAO,EAAE,IAAI,CAACX,gBAAgB;;IAKlC,OAAO,IAAI,CAACK,KAAK,CAACO,MAAM,GAAG,aAAa,GAAG,MAAM,CAAC,CAACD,IAAI,CAAC;EAE5D,CAAC;EAEDb,eAAA,CAAAK,SAAA,CAAAU,IAAI,GAAJ,UAAKF,IAAO;IACR,OAAO,IAAI,CAACD,MAAM,CAACC,IAAI,EAAE,KAAK,CAAC;EACnC,CAAC;EAEDb,eAAA,CAAAK,SAAA,CAAAW,WAAW,GAAX,UAAYH,IAAO;IACf,OAAO,IAAI,CAACD,MAAM,CAACC,IAAI,EAAE,IAAI,CAAC;EAClC,CAAC;EAGL,OAAAb,eAAC;AAAD,CAAC,CAlDD;AAAaiB,OAAA,CAAAjB,eAAA,GAAAA,eAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}