{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.statefulObservableToStatefulEvt = void 0;\nvar evt_1 = require(\"evt\");\nfunction statefulObservableToStatefulEvt(params) {\n  var statefulObservable = params.statefulObservable,\n    _a = params.ctx,\n    ctx = _a === void 0 ? evt_1.Evt.newCtx() : _a;\n  var evt = evt_1.Evt.create(statefulObservable.current);\n  var doSkip = false;\n  evt.attach(ctx, function (data) {\n    doSkip = true;\n    statefulObservable.current = data;\n    doSkip = false;\n  });\n  var unsubscribe = statefulObservable.subscribe(function (data) {\n    if (doSkip) {\n      return;\n    }\n    evt.state = data;\n  }).unsubscribe;\n  ctx.evtDoneOrAborted.attach(function () {\n    return unsubscribe();\n  });\n  return evt;\n}\nexports.statefulObservableToStatefulEvt = statefulObservableToStatefulEvt;","map":{"version":3,"names":["evt_1","require","statefulObservableToStatefulEvt","params","statefulObservable","_a","ctx","Evt","newCtx","evt","create","current","doSkip","attach","data","unsubscribe","subscribe","state","evtDoneOrAborted","exports"],"sources":["C:\\Users\\prana\\AppData\\Local\\Yarn\\Berry\\cache\\powerhooks-npm-0.20.32-d63ff31bfd-10c0.zip\\node_modules\\powerhooks\\src\\tools\\StatefulObservable\\statefulObservableToStatefulEvt.ts"],"sourcesContent":["\nimport { Evt } from \"evt\";\nimport type { StatefulEvt, Ctx } from \"evt\";\nimport type { StatefulObservable } from \"./StatefulObservable\";\n\nexport function statefulObservableToStatefulEvt<T>(\n\tparams: {\n\t\tstatefulObservable: StatefulObservable<T>;\n\t\tctx?: Ctx;\n\t}\n): StatefulEvt<T> {\n\n\tconst {\n\t\tstatefulObservable,\n\t\tctx = Evt.newCtx()\n\t} = params;\n\n\tconst evt = Evt.create(statefulObservable.current);\n\n\tlet doSkip = false;\n\n\tevt.attach(ctx, data => {\n\t\tdoSkip = true;\n\t\tstatefulObservable.current = data;\n\t\tdoSkip = false;\n\t});\n\n\tconst { unsubscribe } = statefulObservable.subscribe(data => {\n\t\tif (doSkip) {\n\t\t\treturn;\n\t\t}\n\t\tevt.state = data\n\t});\n\n\tctx.evtDoneOrAborted.attach(() => unsubscribe());\n\n\treturn evt;\n\n}\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAIA,SAAgBC,+BAA+BA,CAC9CC,MAGC;EAIA,IAAAC,kBAAkB,GAEfD,MAAM,CAAAC,kBAFS;IAClBC,EAAA,GACGF,MAAM,CAAAG,GADS;IAAlBA,GAAG,GAAAD,EAAA,cAAGL,KAAA,CAAAO,GAAG,CAACC,MAAM,EAAE,GAAAH,EAAA;EAGnB,IAAMI,GAAG,GAAGT,KAAA,CAAAO,GAAG,CAACG,MAAM,CAACN,kBAAkB,CAACO,OAAO,CAAC;EAElD,IAAIC,MAAM,GAAG,KAAK;EAElBH,GAAG,CAACI,MAAM,CAACP,GAAG,EAAE,UAAAQ,IAAI;IACnBF,MAAM,GAAG,IAAI;IACbR,kBAAkB,CAACO,OAAO,GAAGG,IAAI;IACjCF,MAAM,GAAG,KAAK;EACf,CAAC,CAAC;EAEM,IAAAG,WAAW,GAAKX,kBAAkB,CAACY,SAAS,CAAC,UAAAF,IAAI;IACxD,IAAIF,MAAM,EAAE;MACX;;IAEDH,GAAG,CAACQ,KAAK,GAAGH,IAAI;EACjB,CAAC,CAAC,CAAAC,WALiB;EAOnBT,GAAG,CAACY,gBAAgB,CAACL,MAAM,CAAC;IAAM,OAAAE,WAAW,EAAE;EAAb,CAAa,CAAC;EAEhD,OAAON,GAAG;AAEX;AAjCAU,OAAA,CAAAjB,+BAAA,GAAAA,+BAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}